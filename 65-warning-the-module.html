<!doctype html>
<html>
  <head>
    <title>Idiosyncratic Ruby: Warning: The Module</title>
    <link rel="alternate" type="application/atom+xml" title="Idiosyncratic Ruby Feed" href="/feed.xml" />
<link href="/stylesheets/all.css" rel="stylesheet" type="text/css" />

<script src="/javascripts/jquery.min.js" type="text/javascript"></script><script src="/javascripts/app.js" type="text/javascript"></script>

<meta charset="utf-8">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta name="description" content="Documenting All Ruby Specialities."/>
<meta name="keywords" content="ruby, core, debug"/>

  </head>

  <body>
    <div class="world">
      <section class="post-header">
        <a href="/" class="post-logo"><img src="/images/idiosyncratic.png" alt="Idiosyncratic Ruby"></a>
        <h1 class="post-heading" id="top"><a href="/65-warning-the-module.html">Warning: The Module</a></h1>
      </section>

      <article class="post">
        <p>Starting with Ruby 2.5ยน it is possible to customize the behavior of <a href="https://ruby-doc.org/core/Kernel.html#method-i-warn">Kernel#warn</a> through the <a href="https://ruby-doc.org/core/Warning.html"><strong>Warning</strong> module</a>. Here is how:</p>

<p></p>

<pre><code>def Warning.warn(w)
  # super calls the original behavior, which is printing to $stderr
  super "\e[31;1mRUBY WARNING: \e[22m#{w.sub(/warning: /, '')}\e[0m"
end

# # #
# examples

warn "test"
# =&gt; RUBY WARNING: test

{ a: 1, a: 2 }
# =&gt; RUBY WARNING: (irb):4: key :a is duplicated and overwritten on line 4

$VERBOSE = true # shows level 2 warnings
def a() end
def a() end
# =&gt; RUBY WARNING: (irb):8: method redefined; discarding old a
# =&gt; RUBY WARNING: (irb):6: previous definition of a was here
</code></pre>

<p>You can unlock some more <strong>warning</strong> features by using <a href="https://github.com/jeremyevans/ruby-warning/">Jeremy Evans' warning gem</a>:</p>

<pre><code>require "warning"

Warning.ignore /duplicated and overwritten/
{ a: 1, a: 2 }
# =&gt; nothing

$VERBOSE = true
Warning.ignore :method_redefined
def a() end
def a() end
# =&gt; nothing
</code></pre>

<p>ยน Although the <strong>Warning</strong> module existed in Ruby 2.4 already, <strong>Kernel#warn</strong> did not make use of it yet</p>

<h2 id="further-reading">Further Reading</h2>

<ul>
  <li><a href="/3-ruby-can-you-speak-louder.html#command-line-options-for-debug-modes">Ruby's verbosity and debug modes</a></li>
</ul>


        <h2>More Idiosyncratic Ruby</h2>
        <ul>
          <li><a href="https://github.com/janlelis/idiosyncratic-ruby.com/commit/cad95d1018a9da5c4289070e2da033fe0306d2ff#all_commit_comments">Please Comment on GitHub</a></li>
            <li>Next Article: <a href="/66-ruby-has-character.html">Ruby has Character</a></li>
            <li>Previous Article: <a href="/64-what-the-regex.html">What the Regex?</a></li>
        </ul>
      </article>

      <footer>
        <div class="footer-right">
          On <a href="/">Idiosyncratic Ruby</a> by <a href="https://janlelis.com">Jan Lelis</a><br>
          
          <a href="https://janlelis.com/data-protection.html">Data Protection</a>
        </div>
        About Core, Debug<br>
        Last Update: May 15, 2018
      </footer>
    </div>
    <script src="/javascripts/rainbow-custom.min.js" type="text/javascript"></script>
  </body>
</html>