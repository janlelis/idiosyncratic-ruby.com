<!doctype html>
<html>
  <head>
    <title>Idiosyncratic Ruby: Limitations of Language</title>
    <link rel="alternate" type="application/atom+xml" title="Idiosyncratic Ruby Feed" href="/feed.xml" />
<link href="/stylesheets/all.css" rel="stylesheet" type="text/css" />
<link href='http://fonts.googleapis.com/css?family=Lato:300' rel='stylesheet' type='text/css'>
<link rel="alternate" type="application/atom+xml" title="Idiosyncratic Ruby" href="https://feeds.feedburner.com/IdiosyncraticRuby" />

<script src="/javascripts/jquery.min.js" type="text/javascript"></script><script src="/javascripts/app.js" type="text/javascript"></script>

<meta charset="utf-8">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta name="description" content="Documentaing all Ruby Specialities. A New Post Every Day in May 2016!"/>
<meta name="keywords" content="ruby, syntax, grammar"/>

  </head>

  <body>
    <div class="world">
      <section class="post-header">
        <a href="/" class="post-logo"><img src="/images/idiosyncratic.png" alt="Idiosyncratic Ruby"></a>
        <h1 class="post-heading" id="top"><a href="/29-limitations-of-language.html">Limitations of Language</a></h1>
      </section>

      <article class="post">
        <p>If you take a closer look, you'll notice that Ruby's grammar has quite a few edge-case where its syntax is inconsistent or ambigious:</p>

<p></p>

<h2 id="binary-minus-vs-minus-taken-as-unary-method-argument">Binary Minus vs Minus taken as Unary Method Argument</h2>

<pre><code>&gt;&gt; [1,3,4,5].size - 1
# =&gt; 3

&gt;&gt; [1,3,4,5].size -1
# wrong number of arguments(1 for 0)
</code></pre>

<h2 id="no-simple-rule-if-a-symbol-can-be-displayed-without-the-explicit--syntax">No Simple Rule, if a Symbol can be Displayed Without the Explicit <code>:""</code> Syntax</h2>

<pre><code>&gt;&gt; {:&lt; =&gt; 0}
# =&gt; {:&lt;=&gt;0}

&gt;&gt; {:&lt;=&gt;0}
# syntax error, unexpected tINTEGER,
# expecting tASSOC
</code></pre>

<h2 id="different-rules-for-modules-and-classes">Different Rules for Modules and Classes</h2>

<pre><code>&gt;&gt; module Eurucamp end
# =&gt; nil

&gt;&gt; class Eurucamp end
# syntax error, unexpected $end
</code></pre>

<p><strong>Update:</strong> Since Ruby 2.3 this is no longer invalid syntax:</p>

<pre><code>&gt;&gt; class Eurucamp end
# =&gt; nil
</code></pre>

<h2 id="ambiguous-if-to-parse--unary-or-as-part-of-binary-match-operator">Ambiguous if to Parse <code>~</code> Unary or as Part of Binary Match Operator</h2>

<pre><code>&gt;&gt; $_="Eurucamp X"
&gt;&gt; ~/X/ # =&gt; 9

&gt;&gt; a=~/X/ # undefined local variable or method `a'
&gt;&gt; a= ~/X/ # =&gt; 9
</code></pre>

<h2 id="global-variables-can-break-string-and-regex-syntax">Global Variables can "Break" String and Regex Syntax</h2>

<pre><code>&gt;&gt; a = "Eurucamp #\n"
&gt;&gt; a.gsub /#$/, ''
# =&gt; ?

&gt;&gt; a = "Eurucamp #\n"
&gt;&gt; a.gsub /#$/, ''
# unterminated regexp meets end of file

&gt;&gt; a = "Eurucamp #\n"
&gt;&gt; a.gsub /#$//, ''
# =&gt; "Eurucamp #"
</code></pre>

<h2 id="unary-or-binary-plus-part-2">Unary or Binary Plus, Part 2</h2>

<pre><code>&gt;&gt; p = 21
&gt;&gt; p 21
# =&gt; 21

&gt;&gt; p = 21
&gt;&gt; p +21
# =&gt; 42
</code></pre>

<h2 id="string-creation-vs-format-method">String Creation vs Format Method</h2>

<pre><code>&gt;&gt; puts%[1]
# undefined method `%' for nil:NilClass

&gt;&gt; puts %[1]
# =&gt; 1
</code></pre>

<h2 id="hash-vs-block">Hash vs Block</h2>

<p>Ruby uses curly braces for both, blocks as well as hashes. Sometimes, this leads to confusing cases:</p>

<pre><code>&gt;&gt; def identity(a) a end

&gt;&gt; identity(1)
#=&gt; 1
&gt;&gt; identity 1
#=&gt; 1
&gt;&gt; identity({})
#=&gt; {}
&gt;&gt; identity {}
#=&gt; wrong number of arguments (0 for 1) (ArgumentError)
</code></pre>

<h2 id="regex-vs-division">Regex vs Division</h2>

<pre><code>&gt;&gt; puts /4/i
# =&gt; (?i-mx:4)

&gt;&gt; puts, i = 42, 2
&gt;&gt; puts /4/i
# =&gt; 5
</code></pre>

<h2 id="further-reading">Further Reading</h2>

<ul>
  <li><a href="https://github.com/ruby/ruby/blob/trunk/parse.y">Ruby's grammar definition</a></li>
</ul>


        <h2>More Idiosyncratic Ruby</h2>
        <ul>
          <li><a href="https://github.com/janlelis/idiosyncratic-ruby.com/commit/cdc80a62c207f966f5391f36ce9767ed41c7beb3#all_commit_comments">Please Comment on GitHub</a></li>
          <li><a class="twitter-share-button" href="https://twitter.com/share"
            data-via="idiosyncraticrb"
            data-count="horizontal"
            data-dnt="true"
          > Tweet this Episode
        </a><script>window.twttr=(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);t._e=[];t.ready=function(f){t._e.push(f);};return t;}(document,"script","twitter-wjs"));</script></li>
            <li>Next Article: <a href="/30-regex-with-class.html">Regex with Class</a></li>
            <li>Previous Article: <a href="/28-operating-nothing.html">Operating Nothing</a></li>
        </ul>
      </article>

      <footer>
        <div class="footer-right">
          On <a href="/">Idiosyncratic Ruby</a> by <a href="https://github.com/janlelis">Jan Lelis</a><br>
          Article Contributions by: cremno, Lucas Dohmen
        </div>
        About Syntax, Grammar |
        Last Update: 2016-01-14
      </footer>
    </div>
    <script src="/javascripts/rainbow-custom.min.js" type="text/javascript"></script>
  </body>
</html>